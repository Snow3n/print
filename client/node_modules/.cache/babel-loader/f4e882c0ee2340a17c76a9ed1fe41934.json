{"ast":null,"code":"var _jsxFileName = \"E:\\\\proj\\\\Landing_sis\\\\src\\\\front\\\\client\\\\src\\\\components\\\\dialog.form.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Grid from '@material-ui/core/Grid';\nimport Select from \"@material-ui/core/Select\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport api from '../api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst defaultValues = {\n  name: \"\",\n  surname: \"\",\n  email: \"\",\n  city: \"\",\n  shipping: \"\",\n  socType: \"\",\n  socValue: \"\",\n  paid: false,\n  sent: false,\n  products: \"\",\n  price: \"\"\n};\nexport default function FormDialog() {\n  _s();\n\n  const [open, setOpen] = useState(false);\n  const [items, setItems] = useState([]);\n  const [city, setCity] = useState(false);\n  const [update, setUpdate] = useState();\n  const [price, setPrice] = useState(0);\n  const [formValues, setFormValues] = useState(defaultValues);\n\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormValues({ ...formValues,\n      [name]: value\n    });\n  };\n\n  useEffect(() => {\n    loadCart();\n  }, []);\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n    console.log(formValues);\n    window.location.href = `/order`; // await api.insertOrder(formValues).then(\n    //   localStorage.removeItem('podarok-print-en')\n    // );\n  };\n\n  const loadCart = () => {\n    if (localStorage.getItem('podarok-print-en')) {\n      let cartList = [];\n      let stored = JSON.parse(localStorage.getItem('podarok-print-en'));\n      let pr = 0;\n\n      for (let i = 0; i < stored.cart.cartItems.length; i++) {\n        cartList.push(stored.cart.cartItems[i]);\n      }\n\n      for (let t = 0; t < cartList.length; t++) {\n        console.log(cartList[t].price, cartList[t].quantity, price, cartList[t]);\n        console.log(cartList);\n        pr += cartList[t].price * cartList[t].quantity;\n        setFormValues({\n          products: cartList[t]._id\n        });\n      }\n\n      setPrice(pr);\n      setItems(cartList);\n      setFormValues({\n        price: pr\n      });\n    }\n  };\n\n  const handleClickOpen = () => {\n    setOpen(true);\n    loadCart();\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const HandleAddQuantity = item => {\n    let stored = JSON.parse(localStorage.getItem('podarok-print-en'));\n\n    for (let i = 0; i < stored.cart.cartItems.length; i++) {\n      if (stored.cart.cartItems[i]._id === `${item._id}`) {\n        if (stored.cart.cartItems[i].quantity >= 50) {\n          stored.cart.cartItems[i].quantity = 50;\n        } else {\n          stored.cart.cartItems[i].quantity++;\n          setPrice(price + Number(stored.cart.cartItems[i].price));\n        }\n\n        stored.cart.price = price;\n        localStorage.setItem('podarok-print-en', JSON.stringify(stored));\n      }\n    }\n\n    loadCart();\n    setUpdate(item.quantity);\n  };\n\n  const HandleRemoveQuantity = item => {\n    let stored = JSON.parse(localStorage.getItem('podarok-print-en'));\n\n    for (let i = 0; i < stored.cart.cartItems.length; i++) {\n      if (stored.cart.cartItems[i]._id === `${item._id}`) {\n        if (stored.cart.cartItems[i].quantity <= 1) {\n          stored.cart.cartItems[i].quantity = 1;\n        } else {\n          stored.cart.cartItems[i].quantity--;\n          setPrice(price - Number(stored.cart.cartItems[i].price));\n        }\n\n        stored.cart.price = price;\n        localStorage.setItem('podarok-print-en', JSON.stringify(stored));\n      }\n    }\n\n    loadCart();\n    setUpdate(item.quantity);\n  };\n\n  const HandleRemoveItem = item => {\n    let stored = JSON.parse(localStorage.getItem('podarok-print-en'));\n\n    for (let i = 0; i < stored.cart.cartItems.length; i++) {\n      if (stored.cart.cartItems[i]._id === `${item._id}`) {\n        let t = stored.cart.cartItems[0];\n        stored.cart.cartItems[0] = stored.cart.cartItems[i];\n        stored.cart.cartItems[i] = t;\n        setPrice(price - Number(stored.cart.cartItems[0].quantity * stored.cart.cartItems[0].price));\n        stored.cart.cartItems.shift();\n        stored.cart.price = price;\n        localStorage.setItem('podarok-print-en', JSON.stringify(stored));\n      }\n    }\n\n    console.log(stored);\n    loadCart();\n    setUpdate(item.quantity);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      variant: \"outlined\",\n      color: \"primary\",\n      onClick: handleClickOpen,\n      children: \"\\u041A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: open,\n      onClose: handleClose,\n      \"aria-labelledby\": \"form-dialog-title\",\n      scroll: \"body\",\n      fullWidth: true,\n      maxWidth: 'sm',\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        id: \"form-dialog-title\",\n        children: \"\\u0412\\u0430\\u0448 \\u0437\\u0430\\u043A\\u0430\\u0437\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: [items.map(item => /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          className: \"contentBlock\",\n          style: {\n            width: '100%',\n            backgroundColor: 'white'\n          },\n          children: /*#__PURE__*/_jsxDEV(Paper, {\n            className: \"paper\",\n            style: {\n              display: \"flex\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: '/imgs/' + item.picture + '.jpg',\n                alt: item.name + ' picture',\n                className: \"picture\",\n                style: {\n                  width: '100px',\n                  height: '100px',\n                  margin: 'auto'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 157,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"productName\",\n              style: {\n                margin: 'auto'\n              },\n              children: item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              style: {\n                margin: 'auto'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                onClick: () => {\n                  HandleRemoveQuantity(item);\n                },\n                children: \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 48\n              }, this), item.quantity, /*#__PURE__*/_jsxDEV(Button, {\n                onClick: () => {\n                  HandleAddQuantity(item);\n                },\n                children: \"+\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 128\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"productPrice\",\n              style: {\n                margin: 'auto'\n              },\n              children: '₴' + item.price * item.quantity\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              style: {\n                margin: 'auto'\n              },\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                onClick: () => {\n                  HandleRemoveItem(item);\n                },\n                children: \"X\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 48\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 13\n        }, this)), /*#__PURE__*/_jsxDEV(Typography, {\n          style: {\n            float: 'right'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: [\"\\u0421\\u0443\\u043C\\u043C\\u0430 \", price, \" \\u0433\\u0440\\u043D.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 50\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        style: {\n          margin: 'auto auto 10px'\n        },\n        children: /*#__PURE__*/_jsxDEV(FormGroup, {\n          row: true,\n          children: /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            justify: \"center\",\n            direction: \"column\",\n            children: [/*#__PURE__*/_jsxDEV(FormControlLabel, {\n              control: /*#__PURE__*/_jsxDEV(Checkbox, {\n                checked: city,\n                onChange: event => setCity(event.target.checked)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 19\n              }, this),\n              label: \"\\u0414\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0430 \\u0432 \\u0433\\u043E\\u0440\\u043E\\u0434 \\u042D\\u043D\\u0435\\u0440\\u0433\\u043E\\u0434\\u0430\\u0440\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: handleSubmit,\n              method: \"POST\",\n              children: [!city ? /*#__PURE__*/_jsxDEV(Grid, {\n                container: true,\n                alignItems: \"center\",\n                justify: \"center\",\n                direction: \"column\",\n                children: [/*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  children: /*#__PURE__*/_jsxDEV(TextField, {\n                    id: \"name-input\",\n                    name: \"name\",\n                    label: \"\\u0418\\u043C\\u044F\",\n                    type: \"text\",\n                    value: formValues.name,\n                    onChange: handleInputChange,\n                    required: true,\n                    fullWidth: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 180,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  children: /*#__PURE__*/_jsxDEV(TextField, {\n                    id: \"surname-input\",\n                    name: \"surname\",\n                    label: \"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F\",\n                    type: \"text\",\n                    value: formValues.surname,\n                    onChange: handleInputChange,\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 192,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 191,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  children: /*#__PURE__*/_jsxDEV(TextField, {\n                    id: \"city-input\",\n                    name: \"city\",\n                    label: \"\\u0413\\u043E\\u0440\\u043E\\u0434\",\n                    type: \"text\",\n                    value: formValues.city,\n                    onChange: handleInputChange,\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 203,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 202,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  children: /*#__PURE__*/_jsxDEV(TextField, {\n                    id: \"shipping-address\",\n                    name: \"shipping\",\n                    label: \"\\u041E\\u0442\\u0434\\u0435\\u043B\\u0435\\u043D\\u0438\\u0435 \\u041D\\u041F\",\n                    type: \"text\",\n                    value: formValues.shipping,\n                    onChange: handleInputChange,\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 214,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 213,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  children: /*#__PURE__*/_jsxDEV(TextField, {\n                    id: \"email-input\",\n                    name: \"email\",\n                    label: \"Email\",\n                    type: \"email\",\n                    value: formValues.email,\n                    onChange: handleInputChange,\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 225,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 224,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  children: /*#__PURE__*/_jsxDEV(TextField, {\n                    id: \"price-input\",\n                    name: \"price\",\n                    type: \"number\",\n                    hidden: true,\n                    value: formValues.price // onChange={handleInputChange}\n                    ,\n                    required: true,\n                    disabled: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 236,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 235,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  children: /*#__PURE__*/_jsxDEV(TextField, {\n                    id: \"products-input\",\n                    name: \"products\",\n                    type: \"text\",\n                    hidden: true,\n                    value: formValues.products // onChange={handleInputChange}\n                    ,\n                    required: true,\n                    disabled: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 248,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(DialogContent, {\n                style: {\n                  margin: 'auto auto 10px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                  id: \"demo-dialog-select-label\",\n                  children: \"\\u041A\\u0430\\u043A \\u043D\\u0430\\u043C \\u0441\\u0432\\u044F\\u0437\\u0430\\u0442\\u044C\\u0441\\u044F \\u0441 \\u0432\\u0430\\u043C\\u0438?\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 261,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                  value: formValues.socType,\n                  onChange: handleInputChange,\n                  input: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 265,\n                    columnNumber: 30\n                  }, this),\n                  required: true,\n                  name: \"socType\",\n                  children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: 'telegram',\n                    children: \"Telegram\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 269,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: 'instagram',\n                    children: \"Instagram\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 270,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: 'viber',\n                    children: \"Viber\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 271,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 262,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Input, {\n                  name: \"socValue\",\n                  onChange: handleInputChange,\n                  value: formValues.socValue,\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 273,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                type: \"submit\",\n                variant: \"contained\",\n                style: {\n                  width: '100%',\n                  backgroundColor: 'green',\n                  margin: '10px 0'\n                },\n                color: \"primary\",\n                children: \"\\u041E\\u0444\\u043E\\u0440\\u043C\\u0438\\u0442\\u044C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 275,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 147,\n    columnNumber: 5\n  }, this);\n}\n\n_s(FormDialog, \"t8Q8c9/HSBVGWBHT2saSeTsypQs=\");\n\n_c = FormDialog;\n\nvar _c;\n\n$RefreshReg$(_c, \"FormDialog\");","map":{"version":3,"sources":["E:/proj/Landing_sis/src/front/client/src/components/dialog.form.js"],"names":["React","useState","useEffect","Button","TextField","Dialog","DialogContent","DialogTitle","FormGroup","FormControlLabel","Checkbox","Grid","Select","MenuItem","Paper","Typography","Input","InputLabel","api","defaultValues","name","surname","email","city","shipping","socType","socValue","paid","sent","products","price","FormDialog","open","setOpen","items","setItems","setCity","update","setUpdate","setPrice","formValues","setFormValues","handleInputChange","e","value","target","loadCart","handleSubmit","event","preventDefault","console","log","window","location","href","localStorage","getItem","cartList","stored","JSON","parse","pr","i","cart","cartItems","length","push","t","quantity","_id","handleClickOpen","handleClose","HandleAddQuantity","item","Number","setItem","stringify","HandleRemoveQuantity","HandleRemoveItem","shift","map","width","backgroundColor","display","picture","height","margin","float","checked"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Select from \"@material-ui/core/Select\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport api from '../api';\r\n\r\nconst defaultValues = {\r\n  name: \"\",\r\n  surname: \"\",\r\n  email: \"\",\r\n  city: \"\",\r\n  shipping: \"\",\r\n  socType: \"\",\r\n  socValue: \"\",\r\n  paid: false,\r\n  sent: false,\r\n  products: \"\",\r\n  price: \"\",\r\n};\r\n\r\nexport default function FormDialog() {\r\n  const [open, setOpen] = useState(false);\r\n  const [items, setItems] = useState([]);\r\n  const [city, setCity] = useState(false);\r\n  const [update, setUpdate] = useState();\r\n  const [price, setPrice] = useState(0);\r\n  const [formValues, setFormValues] = useState(defaultValues);\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormValues({\r\n      ...formValues,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadCart();\r\n  }, []);\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    console.log(formValues);\r\n    window.location.href = `/order`;\r\n    // await api.insertOrder(formValues).then(\r\n    //   localStorage.removeItem('podarok-print-en')\r\n    // );\r\n  };\r\n\r\n  const loadCart = () => {\r\n    if (localStorage.getItem('podarok-print-en')) {\r\n      let cartList = [];\r\n      let stored = JSON.parse(localStorage.getItem('podarok-print-en'));\r\n      let pr = 0;\r\n      for (let i = 0; i < stored.cart.cartItems.length; i++) {\r\n        cartList.push(stored.cart.cartItems[i]);\r\n      }\r\n      for (let t = 0; t < cartList.length; t++) {\r\n        console.log(cartList[t].price, cartList[t].quantity, price, cartList[t]);\r\n        console.log(cartList);\r\n        pr += cartList[t].price * cartList[t].quantity;\r\n        setFormValues({products: cartList[t]._id})\r\n      }\r\n      setPrice(pr);\r\n      setItems(cartList);\r\n      setFormValues({ price: pr });\r\n    }\r\n  }\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n    loadCart();\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const HandleAddQuantity = (item) => {\r\n    let stored = JSON.parse(localStorage.getItem('podarok-print-en'));\r\n    for (let i = 0; i < stored.cart.cartItems.length; i++) {\r\n      if (stored.cart.cartItems[i]._id === `${item._id}`) {\r\n        if (stored.cart.cartItems[i].quantity >= 50) {\r\n          stored.cart.cartItems[i].quantity = 50;\r\n        }\r\n        else {\r\n          stored.cart.cartItems[i].quantity++;\r\n          setPrice(price + Number(stored.cart.cartItems[i].price));\r\n        }\r\n        stored.cart.price = price;\r\n        localStorage.setItem('podarok-print-en', JSON.stringify(stored));\r\n      }\r\n    }\r\n    loadCart();\r\n    setUpdate(item.quantity);\r\n  }\r\n\r\n  const HandleRemoveQuantity = (item) => {\r\n    let stored = JSON.parse(localStorage.getItem('podarok-print-en'));\r\n    for (let i = 0; i < stored.cart.cartItems.length; i++) {\r\n      if (stored.cart.cartItems[i]._id === `${item._id}`) {\r\n        if (stored.cart.cartItems[i].quantity <= 1) {\r\n          stored.cart.cartItems[i].quantity = 1;\r\n        }\r\n        else {\r\n          stored.cart.cartItems[i].quantity--;\r\n          setPrice(price - Number(stored.cart.cartItems[i].price));\r\n        }\r\n        stored.cart.price = price;\r\n        localStorage.setItem('podarok-print-en', JSON.stringify(stored));\r\n      }\r\n    }\r\n    loadCart();\r\n    setUpdate(item.quantity);\r\n  }\r\n\r\n  const HandleRemoveItem = (item) => {\r\n    let stored = JSON.parse(localStorage.getItem('podarok-print-en'));\r\n    for (let i = 0; i < stored.cart.cartItems.length; i++) {\r\n      if (stored.cart.cartItems[i]._id === `${item._id}`) {\r\n        let t = stored.cart.cartItems[0];\r\n        stored.cart.cartItems[0] = stored.cart.cartItems[i];\r\n        stored.cart.cartItems[i] = t;\r\n        setPrice(price - Number(stored.cart.cartItems[0].quantity * stored.cart.cartItems[0].price));\r\n        stored.cart.cartItems.shift();\r\n        stored.cart.price = price;\r\n        localStorage.setItem('podarok-print-en', JSON.stringify(stored));\r\n      }\r\n    }\r\n    console.log(stored);\r\n    loadCart();\r\n    setUpdate(item.quantity);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button variant=\"outlined\" color=\"primary\" onClick={handleClickOpen}>\r\n        Корзина\r\n      </Button>\r\n      <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\" scroll='body' fullWidth={true} maxWidth={'sm'}>\r\n        <DialogTitle id=\"form-dialog-title\">Ваш заказ</DialogTitle>\r\n        <DialogContent>\r\n          {items.map((item) => (\r\n            <Grid item className='contentBlock' style={{ width: '100%', backgroundColor: 'white' }}>\r\n              <Paper className=\"paper\" style={{ display: \"flex\" }}>\r\n                <li><img src={'/imgs/' + item.picture + '.jpg'} alt={item.name + ' picture'} className=\"picture\" style={{ width: '100px', height: '100px', margin: 'auto' }} /></li>\r\n                <li className=\"productName\" style={{ margin: 'auto' }}>{item.name}</li>\r\n                <li style={{ margin: 'auto' }}><Button onClick={() => { HandleRemoveQuantity(item) }}>-</Button>{item.quantity}<Button onClick={() => { HandleAddQuantity(item) }}>+</Button></li>\r\n                <li className=\"productPrice\" style={{ margin: 'auto' }}>{'₴' + item.price * item.quantity}</li>\r\n                <li style={{ margin: 'auto' }}><Button onClick={() => { HandleRemoveItem(item) }}>X</Button></li>\r\n              </Paper>\r\n            </Grid>\r\n          ))}\r\n          <Typography style={{ float: 'right' }}><b>Сумма {price} грн.</b></Typography>\r\n        </DialogContent>\r\n        <DialogContent style={{ margin: 'auto auto 10px' }}>\r\n          <FormGroup row>\r\n            <Grid container justify=\"center\" direction=\"column\">\r\n              <FormControlLabel\r\n                control={\r\n                  <Checkbox checked={city} onChange={(event) => setCity(event.target.checked)} />\r\n                }\r\n                label=\"Доставка в город Энергодар\"\r\n              />\r\n              <form onSubmit={handleSubmit} method=\"POST\">\r\n                {!city ?\r\n                  <Grid container alignItems=\"center\" justify=\"center\" direction=\"column\">\r\n                    <Grid item>\r\n                      <TextField\r\n                        id=\"name-input\"\r\n                        name=\"name\"\r\n                        label=\"Имя\"\r\n                        type=\"text\"\r\n                        value={formValues.name}\r\n                        onChange={handleInputChange}\r\n                        required={true}\r\n                        fullWidth={true}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item>\r\n                      <TextField\r\n                        id=\"surname-input\"\r\n                        name=\"surname\"\r\n                        label=\"Фамилия\"\r\n                        type=\"text\"\r\n                        value={formValues.surname}\r\n                        onChange={handleInputChange}\r\n                        required={true}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item>\r\n                      <TextField\r\n                        id=\"city-input\"\r\n                        name=\"city\"\r\n                        label=\"Город\"\r\n                        type=\"text\"\r\n                        value={formValues.city}\r\n                        onChange={handleInputChange}\r\n                        required={true}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item>\r\n                      <TextField\r\n                        id=\"shipping-address\"\r\n                        name=\"shipping\"\r\n                        label=\"Отделение НП\"\r\n                        type=\"text\"\r\n                        value={formValues.shipping}\r\n                        onChange={handleInputChange}\r\n                        required={true}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item>\r\n                      <TextField\r\n                        id=\"email-input\"\r\n                        name=\"email\"\r\n                        label=\"Email\"\r\n                        type=\"email\"\r\n                        value={formValues.email}\r\n                        onChange={handleInputChange}\r\n                        required={true}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item>\r\n                      <TextField\r\n                        id=\"price-input\"\r\n                        name=\"price\"\r\n                        type=\"number\"\r\n                        hidden={true}\r\n                        value={formValues.price}\r\n                        // onChange={handleInputChange}\r\n                        required={true}\r\n                        disabled={true}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item>\r\n                      <TextField\r\n                        id=\"products-input\"\r\n                        name=\"products\"\r\n                        type=\"text\"\r\n                        hidden={true}\r\n                        value={formValues.products}\r\n                        // onChange={handleInputChange}\r\n                        required={true}\r\n                        disabled={true}\r\n                      />\r\n                    </Grid>\r\n                  </Grid> :\r\n                  <DialogContent style={{ margin: 'auto auto 10px' }}>\r\n                    <InputLabel id=\"demo-dialog-select-label\">Как нам связаться с вами?</InputLabel>\r\n                    <Select\r\n                      value={formValues.socType}\r\n                      onChange={handleInputChange}\r\n                      input={<Input />}\r\n                      required={true}\r\n                      name=\"socType\"\r\n                    >\r\n                      <MenuItem value={'telegram'}>Telegram</MenuItem>\r\n                      <MenuItem value={'instagram'}>Instagram</MenuItem>\r\n                      <MenuItem value={'viber'}>Viber</MenuItem>\r\n                    </Select>\r\n                    <Input name=\"socValue\" onChange={handleInputChange} value={formValues.socValue} required={true} />\r\n                  </DialogContent>}\r\n                <Button type='submit' variant=\"contained\" style={{ width: '100%', backgroundColor: 'green', margin: '10px 0' }} color=\"primary\">Оформить</Button>\r\n              </form>\r\n            </Grid>\r\n          </FormGroup>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}